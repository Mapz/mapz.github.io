<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/link-300x300.gif">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/link-300x300.gif">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/link-300x300.gif">
  <link rel="mask-icon" href="/images/link-300x300.gif" color="#222">
  <link rel="manifest" href="/images/manifest.json">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Consolas:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mapz.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="FIND THE CHILD">
<meta property="og:type" content="website">
<meta property="og:title" content="Mapz&#39;s Blog">
<meta property="og:url" content="http://mapz.github.io/page/3/index.html">
<meta property="og:site_name" content="Mapz&#39;s Blog">
<meta property="og:description" content="FIND THE CHILD">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Mapz">
<meta property="article:tag" content="æ¸¸æˆå¼€å‘,UE4">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://mapz.github.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Mapz's Blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?69c67c43ced4b46e7ba1656a83e9c872";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Mapz's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">å¯ä»¥é€’å½’çš„å‡½æ•°æŒ‡é’ˆ</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mapz.github.io/2021/05/19/UE4%E5%AD%A6%E4%B9%A0%EF%BC%9AFPredictionKey/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/link-300x300.gif">
      <meta itemprop="name" content="Mapz">
      <meta itemprop="description" content="FIND THE CHILD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mapz's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/19/UE4%E5%AD%A6%E4%B9%A0%EF%BC%9AFPredictionKey/" class="post-title-link" itemprop="url">UE4å­¦ä¹ ï¼šFPredictionKey</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-05-19 14:38:44" itemprop="dateCreated datePublished" datetime="2021-05-19T14:38:44+08:00">2021-05-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-06-28 11:45:42" itemprop="dateModified" datetime="2021-06-28T11:45:42+08:00">2021-06-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="FPredictionKey-çš„åŸºæœ¬ä¿¡æ¯"><a href="#FPredictionKey-çš„åŸºæœ¬ä¿¡æ¯" class="headerlink" title="FPredictionKey çš„åŸºæœ¬ä¿¡æ¯"></a>FPredictionKey çš„åŸºæœ¬ä¿¡æ¯</h2><p>FPredictionKey æ˜¯ UE4 åœ¨ Gameplay Ability System æ’ä»¶ä¸­æä¾›çš„ä¸€ä¸ªç»“æ„ä½“</p>
<p>ç¼–å†™ç›®çš„æ˜¯ä¸ºäº†åœ¨ GAS ç³»ç»Ÿä¸­å®ç°å®¢æˆ·ç«¯é¢„æµ‹ä»è€Œä¸ç”¨ç­‰å¾…æœåŠ¡å™¨è¿”å›æå‰å°±æå‰åšä¸€äº›æ“ä½œ</p>
<p>è¾¾åˆ°æé«˜æ¸¸æˆæµç•…æ€§çš„ç›®çš„</p>
<p>æœåŠ¡å™¨è¿”å›é€šè¿‡æˆ–è€…æ‹’ç»åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›¸åº”çš„ Confirm æˆ–è€…åœ¨ Reject åå›æ»šæ­¤æ¬¡æ“ä½œæ‰€åšçš„ä¿®æ”¹</p>
<p>é™¤äº†åœ¨ GAS æœ¬èº«ä¸­</p>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨å…¶ä»–éœ€è¦å®¢æˆ·ç«¯é¢„æµ‹çš„åœ°æ–¹ä½¿ç”¨</p>
<p>ä¾‹å¦‚åŠ¨ç”»çš„é¢„æµ‹</p>
<p>ä½†æ˜¯éœ€è¦ä¾èµ– GAS ä¸­çš„ UAbilitySystemComponent</p>
<ul>
<li>ä¸€ä¸ª Predication Key å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªè¡Œä¸ºåœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„å”¯ä¸€æ ‡è¯†</li>
<li>Predication Key çš„ ID æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œå‚è€ƒï¼š</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FPredictionKey::GenerateNewPredictionKey</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// GKey ä½œä¸ºé™æ€å±€éƒ¨å˜é‡ï¼Œå…¶å€¼ä¸ºå…¨å±€å”¯ä¸€ï¼Œæ¯æ¬¡éƒ½ ++ </span></span><br><span class="line">    <span class="keyword">static</span> KeyType GKey = <span class="number">1</span>;</span><br><span class="line">    Current = GKey++;</span><br><span class="line">    <span class="keyword">if</span> (GKey &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        GKey = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    bIsStale = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºçš„ PK åˆ™åªä½œä¸ºä¸€ä¸ªè¡Œä¸ºçš„æ ‡è¯†ï¼Œä¸ä½œä¸ºå®¢æˆ·ç«¯é¢„æµ‹ç”¨</p>
</li>
<li><p>PK å¯ä»¥é€šè¿‡ void FPredictionKey::GenerateDependentPredictionKey() åˆ›å»ºä¾èµ–ä¸Šä¸€ä¸ª PK çš„ PK ï¼Œä½†æ˜¯ä¸èƒ½åœ¨æœåŠ¡å™¨æ‰§è¡Œï¼Œå› ä¸ºæ²¡æœ‰æ„ä¹‰ï¼ˆæ— éœ€é¢„æµ‹å°±æ— éœ€ç¡®è®¤å’Œå›æ»šï¼‰</p>
</li>
<li><p>PK å¯ä»¥é€šè¿‡ bIsStale è®¾ç½®ä¸ºæ˜¯å¦å¯ä»¥åœ¨ä¸€æ¬¡ç¡®è®¤æˆ–æ‹’ç»åç»§ç»­ä½¿ç”¨</p>
</li>
<li><p>PK å¯ä»¥é€šè¿‡ NewRejectedDelegate å’Œ NewCaughtUpDelegate æ¥åˆ›å»ºç¡®è®¤æˆ–è€…æ‹’ç»çš„å›è°ƒï¼Œå³æ˜¯æœåŠ¡å™¨åŒæ„æˆ–è€…æ‹’ç»å®¢æˆ·ç«¯é¢„æµ‹çš„æ—¶å€™æ‰€è°ƒç”¨çš„å›è°ƒ</p>
</li>
<li><p>PK çš„ç½‘ç»œåºåˆ—åŒ–æ˜¯è‡ªå®šä¹‰çš„</p>
<ul>
<li>ç¬¬ä¸€ä½æ˜¯ PK æ˜¯å¦åœ¨å½“å‰ Connection å¯ç”¨ï¼Œåœ¨åºåˆ—åŒ–çš„æ—¶å€™è®¾ç½®ï¼Œå¦‚æœæ˜¯æœåŠ¡å™¨åˆ›å»ºçš„ï¼Œåˆ™éƒ½å¯ç”¨ï¼Œå¦åˆ™åªæœ‰ PK çš„è¿æ¥ä¿¡æ¯å’Œå½“å‰è¿æ¥ä¸€è‡´çš„æ—¶å€™å¯ç”¨<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ValidKeyForConnection = (PredictiveConnection == <span class="literal">nullptr</span> || (Map == PredictiveConnection) || bIsServerInitiated) &amp;&amp; (Current &gt; <span class="number">0</span>);</span><br></pre></td></tr></table></figure></li>
<li>ç¬¬äºŒä½æ˜¯æ˜¯å¦æœ‰ä¾èµ–çš„ PK ï¼ˆä»…å½“å½“å‰ Connection å¯ç”¨çš„æ—¶å€™å¯ç”¨ï¼‰</li>
<li>ç¬¬ä¸‰ä½æ˜¯æ˜¯å¦ä¸ºæœåŠ¡å™¨åˆ›å»º</li>
<li>å¦‚æœæ˜¯å¯ç”¨è¿æ¥ï¼Œåˆ™å†™å…¥å½“å‰çš„ PK ID</li>
<li>å¦‚æœæœ‰ä¾èµ–çš„ PK åˆ™å†™å…¥ä¾èµ– PK ID</li>
<li>å¦‚æœæ˜¯æœåŠ¡å™¨åˆ›å»ºçš„ PK åˆ™è®¾ç½®å½“å‰ PK çš„ Connection ä¸ºå½“å‰ Connection</li>
</ul>
</li>
</ul>
<h2 id="ä»-Activate-Ability-æ¥çœ‹-PredicationKey-çš„ä½¿ç”¨"><a href="#ä»-Activate-Ability-æ¥çœ‹-PredicationKey-çš„ä½¿ç”¨" class="headerlink" title="ä» Activate Ability æ¥çœ‹ PredicationKey çš„ä½¿ç”¨"></a>ä» Activate Ability æ¥çœ‹ PredicationKey çš„ä½¿ç”¨</h2><p>æˆ‘ä»¬ä» UAbilitySystemCompoment::TryActivateAbility çœ‹èµ·ï¼Œè¿™é‡Œä»…è®¨è®ºä¸€ç§æƒ…å†µï¼Œå°±æ˜¯å®¢æˆ·ç«¯å‘èµ·æ¿€æ´»ï¼ŒæœåŠ¡å™¨æ£€æŸ¥å¹¶ç¡®è®¤çš„æ–¹å¼ï¼Œç•¥è¿‡å…¶ä»–æ–¹å¼çš„æµç¨‹</p>
<ol>
<li>å…ˆåˆ¤æ–­æŠ€èƒ½æ˜¯å¦å¯ä»¥è¢«é‡Šæ”¾ï¼ˆæ˜¯å¦å·²ç»è¢« Give To Actorï¼‰</li>
<li>åˆ¤æ–­æŠ€èƒ½é‡Šæ”¾çš„ Actor æ˜¯å¦åˆæ³•</li>
<li>æ¨¡æ‹Ÿç«¯ä¸å¯ä»¥é‡Šæ”¾æŠ€èƒ½ï¼Œreturn</li>
<li>æ£€æŸ¥æŠ€èƒ½æ˜¯å¦æ˜¯å®¢æˆ·ç«¯è¿œç¨‹é‡Šæ”¾çš„ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦å¯ä»¥è¿œç¨‹é‡Šæ”¾ï¼Œå¦‚æœå¯ä»¥é‡Šæ”¾åˆ™ åˆ›å»ºæ–°çš„ PK å¹¶è°ƒç”¨ CallServerTryActivateAbility å‡†å¤‡æ‰§è¡ŒæœåŠ¡å™¨ RPC ServerTryActivateAbility</li>
<li>CallServerTryActivateAbility ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨åˆæ‰¹çš„ RPC æ•°æ®ï¼Œå¦‚æœåˆæ‰¹çš„ RPC æ•°æ®æœªå¼€å§‹ï¼Œåˆ™æ›´æ–° PK å¹¶å¼€å§‹ï¼Œå¦åˆ™ç›´æ¥è°ƒç”¨ æœåŠ¡å™¨ RPC ServerTryActivateAbility ï¼Œå¹¶ä¼ å…¥åˆ›å»ºçš„ PK</li>
<li>Server è°ƒç”¨ InternalServerTryActivateAbility<br> a. Activate å¤±è´¥çš„æ—¶å€™ï¼Œè°ƒç”¨å®¢æˆ·ç«¯ RPC ï¼Œé€šçŸ¥æ­¤ PK è°ƒç”¨å¤±è´¥ï¼Œå®¢æˆ·ç«¯è°ƒç”¨æ­¤ PK çš„æ‹’ç»å§”æ‰˜ï¼Œä»è€Œè¾¾åˆ°å›æ»šç­‰ç›®çš„ï¼Œå¹¶ä¸”æ‰§è¡Œ EndAbility<br> b. Activate æˆåŠŸçš„æ—¶å€™ï¼Œè°ƒç”¨å®¢æˆ·ç«¯ RPC ClientActivateAbilitySucceed é€šçŸ¥å®¢æˆ·ç«¯æ¿€æ´» Ability æˆåŠŸ<br> c. å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨æˆåŠŸçš„æ—¶å€™ï¼Œéƒ½ä¼šè°ƒç”¨ CallActivateAbility æ¥å¯åŠ¨ Activate Ability</li>
</ol>
<p>è¿™ä¸ªé‡Œé¢ï¼Œä¸€ä¸ª PredicationKey  é€šè¿‡ RPC åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’å¹¶å‚¨å­˜ï¼Œå¹¶ä¸”é€šè¿‡ RPC é€šçŸ¥æ‰§è¡ŒæˆåŠŸæˆ–è€…å¤±è´¥ï¼Œåœ¨æˆåŠŸå’Œå¤±è´¥çš„æ—¶å€™ï¼Œæ‰§è¡Œé€šè¿‡ PK å¯¹åº”èµ·æ¥çš„æˆåŠŸå’Œå¤±è´¥çš„å§”æ‰˜</p>
<p>Activate Ability å¹¶æ²¡æœ‰ç›´æ¥ç”¨åˆ°å›æ»šç›¸å…³çš„å†…å®¹ï¼Œå› ä¸ºè¿™é‡Œæ²¡æœ‰åœ¨å®¢æˆ·ç«¯ Try Activate Ability ååšå…¶ä»–æ“ä½œï¼Œè€Œæ˜¯ç­‰å¾…æœåŠ¡å™¨è¿”å› Confirm æˆ–è€… Reject</p>
<p>æˆ‘ä»¬åœ¨é‡Šæ”¾æŠ€èƒ½åï¼Œä¹Ÿå¯ä»¥ä¼šåšè¿‡ä¸€äº›é™„åŠ æ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨ Reject å§”æ‰˜ä¸­ç»‘å®šè‡ªå·±çš„å›æ»šæ“ä½œ</p>
<p>å†™å…¶ä»–ä¸€äº›åŠŸèƒ½çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨å®¢æˆ·ç«¯å‘é€ RPC åï¼Œç›´æ¥å¼€å§‹å¤„ç†è‡ªå·±çš„æ“ä½œï¼Œç­‰å¾…æœåŠ¡å™¨ Reject åï¼Œç”¨æŒ‚åœ¨ Reject çš„å§”æ‰˜ä¸Šï¼Œç”¨äºå›æ»šå®¢æˆ·ç«¯æ“ä½œï¼Œä¾‹å¦‚åœæ­¢æ’­æ”¾åŠ¨ç”»</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mapz.github.io/2021/05/17/UE4%EF%BC%9A%E6%B8%B8%E6%88%8F%E5%85%B3%E9%97%AD%E6%B5%81%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/link-300x300.gif">
      <meta itemprop="name" content="Mapz">
      <meta itemprop="description" content="FIND THE CHILD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mapz's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/17/UE4%EF%BC%9A%E6%B8%B8%E6%88%8F%E5%85%B3%E9%97%AD%E6%B5%81%E7%A8%8B/" class="post-title-link" itemprop="url">UE4ï¼šæ¸¸æˆå…³é—­æµç¨‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-05-17 16:00:58" itemprop="dateCreated datePublished" datetime="2021-05-17T16:00:58+08:00">2021-05-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-05-25 11:15:51" itemprop="dateModified" datetime="2021-05-25T11:15:51+08:00">2021-05-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨ UE4 å…³é—­æ¸¸æˆçš„æ—¶å€™ï¼Œå¤„ç†ä¸€äº›äº‹æƒ…ï¼Œé‚£ä¹ˆå¯ä»¥é‡å†™ UGameInstance::ShutDown()</p>
<p>ä½†æ˜¯æœ‰æ—¶å€™åœ¨æ¸¸æˆå…³é—­çš„æ—¶å€™ï¼Œè¿™ä¸ªå‡½æ•°å¹¶æœªè°ƒç”¨ï¼Œäºæ˜¯æˆ‘æœ‰å¿…è¦æ¢ç©¶ä¸€ç•ªä»–çš„è°ƒç”¨é“¾</p>
<p>è¿™é‡Œä»…è®¨è®º Engine è€Œä¸è®¨è®º EditorEngine</p>
<p>è°ƒç”¨æ ˆ</p>
<ul>
<li>UGameInstance::ShutDown()</li>
<li>UGameEngine::PreExit()</li>
<li>FEngineLoop::Exit()</li>
<li>è°ƒç”¨ EngineExit æˆ–è€…å¹³å°è°ƒç”¨é€€å‡º</li>
<li>EngineExit è¢«æ”¾åœ¨äº† GuardedMain å‡½æ•°ä¸­å®šä¹‰çš„ä¸€ä¸ªç»“æ„ä½“ä¸­</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// make sure GEngineLoop::Exit() is always called.</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EngineLoopCleanupGuard</span> </span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line">	~<span class="built_in">EngineLoopCleanupGuard</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">EngineExit</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125; CleanupGuard;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå°±æ˜¯è¯´æ¸¸æˆ Main å‡½æ•°ç»“æŸæ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€å®šä¼šæ‰§è¡Œ ShutDown</p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘æµ‹è¯•çš„æ—¶å€™æ—¥å¿—ä¸­æ²¡æœ‰å‡ºç° ShutDown ç›¸å…³å†…å®¹å‘¢</p>
<p>æ£€æŸ¥å‘ç°æˆ‘ä»¬è°ƒç”¨å…³é—­æ¸¸æˆçš„æ—¶å€™ç”¨çš„æ˜¯</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FPlatformMisc::<span class="built_in">RequestExit</span>(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FWindowsPlatformMisc::RequestExit</span><span class="params">( <span class="keyword">bool</span> Force )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">UE_LOG</span>(LogWindows, Log,  <span class="built_in">TEXT</span>(<span class="string">&quot;FPlatformMisc::RequestExit(%i)&quot;</span>), Force );</span><br><span class="line"></span><br><span class="line">	<span class="built_in">RequestEngineExit</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Win RequestExit&quot;</span>));</span><br><span class="line">	FCoreDelegates::ApplicationWillTerminateDelegate.<span class="built_in">Broadcast</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>( Force )</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// Force immediate exit. In case of an error set the exit code to 3.</span></span><br><span class="line">		<span class="comment">// Dangerous because config code isn&#x27;t flushed, global destructors aren&#x27;t called, etc.</span></span><br><span class="line">		<span class="comment">// Suppress abort message and MS reports.</span></span><br><span class="line">		<span class="comment">//_set_abort_behavior( 0, _WRITE_ABORT_MSG | _CALL_REPORTFAULT );</span></span><br><span class="line">		<span class="comment">//abort();</span></span><br><span class="line">	</span><br><span class="line">		<span class="comment">// Make sure the log is flushed.</span></span><br><span class="line">		<span class="keyword">if</span>( GLog )</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// This may be called from other thread, so set this thread as the master.</span></span><br><span class="line">			GLog-&gt;<span class="built_in">SetCurrentThreadAsMasterThread</span>();</span><br><span class="line">			GLog-&gt;<span class="built_in">TearDown</span>();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">TerminateProcess</span>(<span class="built_in">GetCurrentProcess</span>(), GIsCriticalError ? <span class="number">3</span> : <span class="number">0</span>); </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// Tell the platform specific code we want to exit cleanly from the main loop.</span></span><br><span class="line">		<span class="built_in">PostQuitMessage</span>( <span class="number">0</span> );</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯è§ä¼ å…¥ true ä¸ºå‚æ•°çš„æ—¶å€™ï¼Œç›´æ¥æŠŠè¿›ç¨‹æ€äº†ï¼Œå¯¼è‡´æœªæ‰§è¡Œ UGameInstance::ShutDown()</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mapz.github.io/2019/01/17/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9A%E5%83%8F%E7%B4%A0FC%E8%BF%98%E5%8E%9F%E6%B8%B8%E6%88%8FSuperSimon%EF%BC%88%E4%B8%80%EF%BC%89%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/link-300x300.gif">
      <meta itemprop="name" content="Mapz">
      <meta itemprop="description" content="FIND THE CHILD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mapz's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/17/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9A%E5%83%8F%E7%B4%A0FC%E8%BF%98%E5%8E%9F%E6%B8%B8%E6%88%8FSuperSimon%EF%BC%88%E4%B8%80%EF%BC%89%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/" class="post-title-link" itemprop="url">Unityå­¦ä¹ ï¼šåƒç´ FCè¿˜åŸæ¸¸æˆSuperSimonï¼ˆä¸€ï¼‰å‡†å¤‡å·¥ä½œ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-01-17 16:44:09" itemprop="dateCreated datePublished" datetime="2019-01-17T16:44:09+08:00">2019-01-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-04-22 10:15:32" itemprop="dateModified" datetime="2021-04-22T10:15:32+08:00">2021-04-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç°åœ¨å¼€å§‹æ­£å¼åˆ¶ä½œæˆ‘ä»¬çš„FCé‡åˆ¶æ¸¸æˆ SuperSimon</p>
<h2 id="åˆ›å»ºç¯å¢ƒ"><a href="#åˆ›å»ºç¯å¢ƒ" class="headerlink" title="åˆ›å»ºç¯å¢ƒ"></a>åˆ›å»ºç¯å¢ƒ</h2><ol>
<li>Unity 2018.3</li>
<li>ä½¿ç”¨ Package Manager ä¸‹è½½ 2D Pixel Perfect æ’ä»¶ï¼ˆéœ€è¦è®¾ç½® Package Manager çš„é«˜çº§è®¾ç½®ï¼Œæ‰“å¼€æ˜¾ç¤ºé¢„è§ˆåŒ…</li>
<li>å› ä¸ºæœ¬æ¬¡ä½¿ç”¨æ–°çš„è¾“å…¥åŒ…ï¼Œä½¿ç”¨ Package Manager ä¸‹è½½ Input System</li>
<li>ä½¿ç”¨ <a href="https://mapz.github.io/2019/01/17/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AFC%E4%B8%AD%E6%8A%A0%E5%87%BA%E6%9D%A5%E7%9A%84%E5%AD%97%E4%BD%93%E5%81%9A%E6%88%90BitmapFont/">è¿™é‡Œ</a> çš„æ–‡ç« ä¸­çš„æ–¹å¼ï¼Œä»æ¶é­”åŸ3çš„SpriteSheetä¸­åˆ›å»ºå¥½å­—ä½“</li>
</ol>
<img src="/2019/01/17/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9A%E5%83%8F%E7%B4%A0FC%E8%BF%98%E5%8E%9F%E6%B8%B8%E6%88%8FSuperSimon%EF%BC%88%E4%B8%80%EF%BC%89%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/CV3Font.png" class="" title="Dumpçš„å­—ä½“å›¾ç‰‡">

<h2 id="åœºæ™¯ä¸­çš„å†…å®¹"><a href="#åœºæ™¯ä¸­çš„å†…å®¹" class="headerlink" title="åœºæ™¯ä¸­çš„å†…å®¹"></a>åœºæ™¯ä¸­çš„å†…å®¹</h2><ol>
<li>æ‘„åƒæœºè®¾ç½®æ­£äº¤ï¼ŒèƒŒæ™¯è‰² solid color,å¤§å°128</li>
<li>æ‘„åƒæœºGOä¸Šæ·»åŠ ä¸€ä¸ª Pixel Perfect Cameraï¼Œè®¾ç½®pixel perUnit 1,åˆ†è¾¨ç‡256 x 240,ä¸‹é¢é’©å­å…¨æ‰“ä¸Š</li>
<li>åˆ›å»ºUICanvasï¼Œç”¨æ‘„åƒæœº Renderï¼ŒPixel perfect å‹¾ä¸Šï¼ŒCanvas Scaler åˆ†è¾¨ç‡è®¾ç½®å¥½ï¼Œæ¨¡å¼é€‰æ‹©éšå±å¹•å¤§å°ç¼©æ”¾ã€‚ pixel per unit 1ã€‚Match mode expandã€‚</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mapz.github.io/2019/01/17/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AFC%E4%B8%AD%E6%8A%A0%E5%87%BA%E6%9D%A5%E7%9A%84%E5%AD%97%E4%BD%93%E5%81%9A%E6%88%90BitmapFont/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/link-300x300.gif">
      <meta itemprop="name" content="Mapz">
      <meta itemprop="description" content="FIND THE CHILD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mapz's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/17/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AFC%E4%B8%AD%E6%8A%A0%E5%87%BA%E6%9D%A5%E7%9A%84%E5%AD%97%E4%BD%93%E5%81%9A%E6%88%90BitmapFont/" class="post-title-link" itemprop="url">Unityå­¦ä¹ ï¼šFCä¸­æŠ å‡ºæ¥çš„å­—ä½“åšæˆBitmapFont</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-01-17 16:12:22" itemprop="dateCreated datePublished" datetime="2019-01-17T16:12:22+08:00">2019-01-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-04-22 10:15:32" itemprop="dateModified" datetime="2021-04-22T10:15:32+08:00">2021-04-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>åšåƒç´ æ¸¸æˆçš„æ—¶å€™ï¼Œä½ é€šå¸¸ä¼šè‡ªå®šä¹‰å­—ä½“ï¼Œæˆ–è€…ç»˜åˆ¶åƒç´ å­—ä½“ã€‚</p>
<p>å­—ä½“ç”»å¥½ï¼Œæˆ–è€…åƒæˆ‘ä»¬ä¸€æ ·ç›´æ¥ä» FC æ¸¸æˆé‡Œé¢æŠ å‡ºå›¾é›†æ¥ä¹‹åï¼Œæ€ä¹ˆæ ·æ¥åšæˆBitmapFontå‘¢ï¼Ÿ</p>
<p>ç½‘ä¸Šçš„å†…å®¹é€šå¸¸æ•™ä½ æ€ä¹ˆä»å®‰è£…å¥½çš„ttfæ¥å¯¼å‡ºï¼Œç°åœ¨æˆ‘ä»¬æ‰‹ä¸Šåªæœ‰ PNG æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<h2 id="ç”¨åˆ°çš„å·¥å…·"><a href="#ç”¨åˆ°çš„å·¥å…·" class="headerlink" title="ç”¨åˆ°çš„å·¥å…·"></a>ç”¨åˆ°çš„å·¥å…·</h2><ul>
<li>BMFont</li>
<li>Unity</li>
</ul>
<h2 id="å‡è®¾"><a href="#å‡è®¾" class="headerlink" title="å‡è®¾"></a>å‡è®¾</h2><ol>
<li>æˆ‘ä»¬çš„å­—ç¬¦å›¾é›†ä¸­æ–‡å­—å¤§å°éƒ½æ˜¯ 8 X 8,å¹¶ä¸”æ— é—´éš”ï¼ˆä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å¤§å°ï¼Œæ€»ä¹‹Unityå¯ä»¥è‡ªåŠ¨æŒ‰æ ¼å­å¤§å°æ¥åˆ‡å°±è¡Œï¼‰</li>
</ol>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol>
<li>æˆ‘ä»¬ä»FC Dump ä¸‹æ¥çš„å­—ä½“å›¾é›†ï¼Œä¸€èˆ¬éƒ½æ˜¯8x8çš„å­—ç¬¦é›†ï¼Œä¸ºäº†èƒ½å¤Ÿä½¿ç”¨BMFontæ¥å¯¼å‡ºBitmap Fontï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠè¿™ä¸ªå›¾é›†æ‰“æˆå•ä¸ªçš„å­—ç¬¦ã€‚</li>
<li>æ‰“å¼€ Unityï¼Œå¯¼å…¥å­—ç¬¦é›†å›¾ç‰‡ï¼Œå¯¼å…¥è®¾ç½®ä¸º å‹ç¼©-&gt;æ— ï¼Œå¹¶æŠŠå¯è¯»å†™æ‰“å¼€ï¼ŒSpriteç±»å‹ä¸ºå¤šä¸ª</li>
<li>æ‰“å¼€ Sprite Editor ï¼Œåˆ‡ç‰‡æ–¹å¼ By Cell Size å¤§å° 8 x 8ï¼Œåˆ‡å¥½å›¾é›†</li>
<li>ä½¿ç”¨å¦‚ä¸‹è„šæœ¬å¯¼å‡ºä¸ºå•ä¸ªçš„å›¾ç‰‡</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">using UnityEditor;</span><br><span class="line">using UnityEngine;</span><br><span class="line">static class BitmapFontTool &#123;</span><br><span class="line">    [MenuItem (&quot;BitmapFontTool/å¯¼å‡ºåˆ‡å¥½çš„Sprite&quot;)]</span><br><span class="line">    static void SaveSprite () &#123;</span><br><span class="line">        //æ¯ä¸€å¼ è´´å›¾ç±»å‹Advancedä¸‹ Read/Write Enabledæ‰“ä¸Šå‹¾æ‰èƒ½è¿›è¡Œæ–‡ä»¶è¯»å–</span><br><span class="line">        //å¯¼å…¥ç±»å‹ä¸èƒ½æ˜¯å‹ç¼©è¿‡çš„</span><br><span class="line">        string bitMapfontPath = @&quot;Assets/BitmapFontTool/&quot;;</span><br><span class="line">        foreach (Object obj in Selection.objects) &#123;</span><br><span class="line"></span><br><span class="line">            string selectionPath = AssetDatabase.GetAssetPath (obj);</span><br><span class="line">            string selectionExt = System.IO.Path.GetExtension (selectionPath);</span><br><span class="line">            string fileName = System.IO.Path.GetFileNameWithoutExtension (selectionPath);</span><br><span class="line">            string loadPath = selectionPath.Substring (0, selectionPath.Length - selectionExt.Length);</span><br><span class="line">            if (selectionExt.Length == 0) continue;</span><br><span class="line"></span><br><span class="line">            //åŠ è½½æ­¤æ–‡ä»¶ä¸‹çš„æ‰€æœ‰èµ„æº</span><br><span class="line">            Object[] spriteList = AssetDatabase.LoadAllAssetsAtPath (selectionPath); </span><br><span class="line"></span><br><span class="line">            if (spriteList.Length &gt; 0) &#123;</span><br><span class="line">                //åˆ›å»ºå¯¼å‡ºæ–‡ä»¶å¤¹</span><br><span class="line">                string outPath = bitMapfontPath + &quot;/SpriteExportOutput/&quot; + fileName;</span><br><span class="line">                System.IO.Directory.CreateDirectory (outPath);</span><br><span class="line"></span><br><span class="line">                foreach (var sprite in spriteList) &#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        var sprite_ = (Sprite) sprite;</span><br><span class="line">                        Texture2D tex = new Texture2D ((int) sprite_.rect.width, (int) sprite_.rect.height, sprite_.texture.format, false);</span><br><span class="line">                        tex.SetPixels (sprite_.texture.GetPixels ((int) sprite_.rect.xMin, (int) sprite_.rect.yMin, (int) sprite_.rect.width, (int) sprite_.rect.height));</span><br><span class="line">                        tex.Apply ();</span><br><span class="line">                        //å†™å‡ºæˆpngæ–‡ä»¶</span><br><span class="line">                        System.IO.File.WriteAllBytes (outPath + &quot;/&quot; + sprite_.name + &quot;.png&quot;, tex.EncodeToPNG ());</span><br><span class="line">                        Debug.Log (&quot;SaveSprite to&quot; + outPath);</span><br><span class="line">                    &#125; catch (System.Exception e) &#123;</span><br><span class="line">                        Debug.Log (e);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                Debug.Log (&quot;ä¿å­˜å›¾ç‰‡å®Œæ¯•!&quot; + outPath);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        // &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>ç½‘ä¸Šæœç´¢ BMFont æ•™ç¨‹ï¼ŒæŒ‰æ•™ç¨‹ä½¿ç”¨å¯¼å‡ºçš„å›¾ç‰‡ï¼Œåˆ›å»º fnt å­—ä½“</li>
<li>æŠŠè¾“å‡ºçš„æ–‡ä»¶å¯¼å…¥ Unity ,ä¸‹è½½ BitmapFontImporter æ’ä»¶</li>
<li>Assets -&gt; Bitmap Font -&gt; build åˆ›å»º Unity è‡ªå®šä¹‰å­—ä½“</li>
<li>ä½¿ç”¨å­—ä½“</li>
</ol>
<h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ol>
<li>BMFont å¯¼å…¥å¤§é‡å›¾ç‰‡æ–‡ä»¶çš„æ—¶å€™éå¸¸çš„éš¾ç”¨ï¼Œä¸é€‚åˆæ‰¹é‡ä½¿ç”¨</li>
<li>æ—¢ç„¶å·²ç»æœ‰å›¾é›†äº†ï¼Œä½•ä¸åœ¨å›¾é›†ä¸Šè‡ªå·±åˆ›å»ºfntæ–‡ä»¶å‘¢ï¼Ÿ</li>
</ol>
<h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><p>åœ¨Unityä¸‹ï¼Œè‡ªå·±å†™ä¸ªå·¥å…·æ¥åˆ¶ä½œfntä¹Ÿå¹¶ä¸éš¾<br>æŒ–ä¸ªå‘ç•™ç€ä»¥åæ¥å°è¯•</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mapz.github.io/2019/01/17/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9A%E5%BC%80%E6%96%B0%E5%9D%91%EF%BC%8CSuper-Simon-Adv/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/link-300x300.gif">
      <meta itemprop="name" content="Mapz">
      <meta itemprop="description" content="FIND THE CHILD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mapz's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/17/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9A%E5%BC%80%E6%96%B0%E5%9D%91%EF%BC%8CSuper-Simon-Adv/" class="post-title-link" itemprop="url">Unityå­¦ä¹ ï¼šå¼€æ–°å‘ï¼ŒSuper_Simon_Adv</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-01-17 11:00:16" itemprop="dateCreated datePublished" datetime="2019-01-17T11:00:16+08:00">2019-01-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-04-22 10:15:32" itemprop="dateModified" datetime="2021-04-22T10:15:32+08:00">2021-04-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ä¹‹å‰åšäº† FC è’é‡å¤§é•–å®¢çš„ retro demo</p>
<p>æ€»ç»“äº†ä¸€äº›é—®é¢˜ï¼Œç°åœ¨å‡†å¤‡å…ˆæ”¾åœ¨ä¸€è¾¹ï¼Œä¸æƒ³æ”¹äº†</p>
<p>æ ¹æ®æ€»ç»“çš„è¿™äº›é—®é¢˜ï¼Œå¼€ä¸ªæ–°å‘å§</p>
<p>å‡†å¤‡å¼„æˆä¸€ä¸ª FC å¤§æ‚çƒ©æ¸¸æˆ</p>
<h2 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h2><p>æ¶é­”åŸè¥¿è’™çš„å¤§å†’é™©</p>
<p>ç´ æä¸ºå„ä¸ª FC æ¸¸æˆå†…å®¹</p>
<p>æ¨ªç‰ˆ Platform<br>æ ¹æ®å¯èƒ½ ä¹Ÿä¼šå˜æˆ æ¨ªç‰ˆæ¸…å…³</p>
<h2 id="åˆ†è¾¨ç‡"><a href="#åˆ†è¾¨ç‡" class="headerlink" title="åˆ†è¾¨ç‡"></a>åˆ†è¾¨ç‡</h2><p>è¿˜åŸ FC çš„ 256 X 240 åˆ†è¾¨ç‡</p>
<h2 id="é¢„è®¡ç”¨åˆ°çš„å†…å®¹å’Œæ”¹è¿›"><a href="#é¢„è®¡ç”¨åˆ°çš„å†…å®¹å’Œæ”¹è¿›" class="headerlink" title="é¢„è®¡ç”¨åˆ°çš„å†…å®¹å’Œæ”¹è¿›"></a>é¢„è®¡ç”¨åˆ°çš„å†…å®¹å’Œæ”¹è¿›</h2><ol>
<li>ä¹‹å‰çš„ Demo æ²¡æœ‰ç»è¿‡è®¾è®¡ï¼Œæƒ³åˆ°å“ªå†™åˆ°å“ªï¼Œå¤ªæ½¦è‰ï¼Œæ‰€ä»¥è¿™æ¬¡å…ˆè®¾è®¡å¥½å†å‡ºå‘</li>
<li>è¿™æ¬¡ä½¿ç”¨ CSV çš„æ–¹å¼æ¥é…ç½®å•ä½å±æ€§ï¼Œå¹¶åˆå§‹åŒ–</li>
<li>Pixel Perfect æ‘„åƒæœº</li>
<li>å…ˆå¼„æˆå•æœºæ‰“åŒ…æ¨¡å¼ï¼ŒåæœŸå†å¼„æˆå¯çƒ­æ›´æ–°æ¨¡å¼</li>
<li>å…ˆæœŸæ¥å…¥ Lua</li>
<li>ä½¿ç”¨ Unity çš„ Preview æ–°è¾“å…¥æ–¹å¼</li>
<li>AI ä½¿ç”¨ è¡Œä¸ºæ ‘</li>
<li>ä½¿ç”¨ä¸€äº› Shader æ¥åˆ¶ä½œæ•ˆæœ</li>
<li>ç”Ÿæ€ªå™¨çš„è¿›ä¸€æ­¥ä¼˜åŒ–</li>
<li>åšä¸€ä¸ªä» PNG å¯¼å‡º Bitmap Font çš„å·¥å…·</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mapz.github.io/2018/12/11/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AProjectTiny%E7%8E%B0%E7%8A%B6%EF%BC%88%E5%8D%B3%E6%97%B6%E6%9B%B4%E6%96%B0%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/link-300x300.gif">
      <meta itemprop="name" content="Mapz">
      <meta itemprop="description" content="FIND THE CHILD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mapz's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/11/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AProjectTiny%E7%8E%B0%E7%8A%B6%EF%BC%88%E5%8D%B3%E6%97%B6%E6%9B%B4%E6%96%B0%EF%BC%89/" class="post-title-link" itemprop="url">Unityå­¦ä¹ ï¼šProjectTinyç°çŠ¶ï¼ˆå³æ—¶æ›´æ–°ï¼‰</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-12-11 15:33:34" itemprop="dateCreated datePublished" datetime="2018-12-11T15:33:34+08:00">2018-12-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-04-22 10:15:32" itemprop="dateModified" datetime="2021-04-22T10:15:32+08:00">2021-04-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="TileMap"><a href="#TileMap" class="headerlink" title="TileMap"></a>TileMap</h2><ul>
<li>å¯ä»¥ç¼–è¾‘ï¼Œå¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯ç°åœ¨æ— ç‰©ç†ç‰¹æ€§ï¼ˆPlatformæ¸¸æˆå¯ä»¥å…ˆç­‰ç­‰ï¼‰ï¼Œä¸èƒ½è®¾ç½®ç¢°æ’</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mapz.github.io/2018/12/10/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AProjectTiny%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E5%BC%B9%E7%90%83%E5%92%8C2D%E7%89%A9%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/link-300x300.gif">
      <meta itemprop="name" content="Mapz">
      <meta itemprop="description" content="FIND THE CHILD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mapz's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/10/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AProjectTiny%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E5%BC%B9%E7%90%83%E5%92%8C2D%E7%89%A9%E7%90%86/" class="post-title-link" itemprop="url">Unityå­¦ä¹ ï¼šProjectTinyå­¦ä¹ ï¼ˆäºŒï¼‰å¼¹çƒå’Œ2Dç‰©ç†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-12-10 14:40:38" itemprop="dateCreated datePublished" datetime="2018-12-10T14:40:38+08:00">2018-12-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-04-23 18:01:14" itemprop="dateModified" datetime="2021-04-23T18:01:14+08:00">2021-04-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æ¥ç€ä¸Šæ¬¡æˆ‘ä»¬ç»§ç»­æ¥ç© Tiny Mode</p>
<h2 id="åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®"><a href="#åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®"></a>åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</h2><p>èœå• -&gt; tiny -&gt; file -&gt; new project </p>
<p>åˆ›å»ºæ–°çš„é¡¹ç›® TinyNew</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ Asset ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åä¸º TinyNew çš„ç›®å½•</p>
<p>ä¸‹é¢æœ‰ä¸€ä¸ª TinyNew.utproject æ–‡ä»¶</p>
<p>è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ tiny mode çš„é¡¹ç›®æ–‡ä»¶äº†</p>
<p>å’Œ Unity ä¸åŒï¼Œtiny mode ä¸å­˜åœ¨ Scene </p>
<p>åŒå‡»é¡¹ç›®æ–‡ä»¶ï¼Œå°±å¯ä»¥åŠ è½½é¡¹ç›®äº†</p>
<p>é¡¹ç›®çš„ Inspector å¦‚å›¾</p>


<p>å¯ä»¥é€‰æ‹© Build ç±»å‹ï¼Œéœ€è¦åŠ è½½çš„æ¨¡å—</p>
<p>è¿˜æœ‰æ˜¾ç¤ºè®¾ç½®ä»¥åŠç‰©ç†è®¾ç½®</p>
<p>ä»å¯åŠ è½½çš„æ¨¡å—çœ‹æˆ‘ä»¬ç°åœ¨åŸºæœ¬ä¹Ÿå¯ä»¥çŸ¥é“ Tiny Mode ç°æœ‰çš„åŠŸèƒ½æœ‰å“ªäº›</p>
<p>ç‰©ç†é€‰é¡¹åªæœ‰ä¸€ä¸ªé‡åŠ›ï¼Œå¯ä»¥çœ‹å‡ºç›¸æ¯” Unity æœ¬ä½“éå¸¸çš„ç²¾ç®€</p>
<p>æˆ‘ä»¬è¦åšçš„æ˜¯å¹³é¢ä¸Šçƒè§¦è¾¹å¼¹çš„æ•ˆæœï¼Œæ‰€ä»¥é‡åŠ›è®¾ç½®ä¸º 0</p>
<hr>
<h2 id="å¼€å§‹åˆ›å»ºä¸»å®ä½“"><a href="#å¼€å§‹åˆ›å»ºä¸»å®ä½“" class="headerlink" title="å¼€å§‹åˆ›å»ºä¸»å®ä½“"></a>å¼€å§‹åˆ›å»ºä¸»å®ä½“</h2><p>ä»¥å‰æˆ‘ä»¬çš„å„ç§ç©æ„ï¼Œéƒ½æ˜¯æ”¾åœ¨ GameObject ä¸Šçš„ï¼Œåœ¨ ECS ä¸­ï¼ŒGameObject æ²¡æœ‰äº†ï¼Œç”¨æ¥æ”¾å†…å®¹çš„å˜æˆäº† Entityï¼Œæ‰€ä»¥è¿˜æ˜¯è€ä¸€å¥—ï¼Œéœ€è¦ä¸€ä¸ª Entity æ¥æ”¾ç½®æ‘„åƒæœºä»€ä¹ˆçš„</p>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ Entity ç°é˜¶æ®µåªèƒ½ä» Tiny èœå• Create EntityGroup æˆ–è€…å±‚çº§å›¾ä¸­ï¼Œç‚¹å‡» Create EntityGroup</p>
<p>æˆ‘ä»¬åœ¨ Entities ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª MainGroupï¼Œç‚¹å‡»å</p>
<p>åœ¨ EntityGroup çš„ Inspector ä¸­å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæŒ‰é’®</p>


<ul>
<li>Load: åŠ è½½è¿™ä¸ªç»„çš„ä¸€ä¸ª Entity å®ä¾‹åˆ°å±‚çº§å›¾ä¸­ï¼Œæ–¹ä¾¿æ“ä½œ</li>
<li>Set as StartUp: è®¾ç½®ä¸ºåˆå§‹ Groupï¼Œæ¸¸æˆå¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åŠ è½½ï¼Œä¸èƒ½è¢« Unload</li>
</ul>
<p>æˆ‘ä»¬æŠŠ MainGroup è®¾ç½®ä¸ºå¯åŠ¨åŠ è½½</p>
<p>åœ¨ MainGroup å³è¾¹çš„å°èœå•é‡Œé¢é€‰æ‹© Camera æ–°å¢ä¸€ä¸ª Camera</p>
<p>å† Create Emptyï¼Œæ–°å»ºä¸€ä¸ªç©ºç»„ä»¶ï¼Œå‘½åä¸º Spawnerï¼Œç”¨æ¥äº§ç”Ÿçƒçƒ</p>
<p>å† Create Emptyï¼Œæ–°å»ºä¸€ä¸ªç©ºç»„ä»¶ï¼Œå‘½åä¸º Borderï¼Œä½œä¸ºè¾¹ç•Œ</p>
<p>å¯¼å…¥ä¸€ä¸ªçŸ©å½¢ Sprite, è¿™é‡Œå¯¼å…¥ Sprite çš„æ–¹å¼å’Œ Unity æœ¬ä½“æ˜¯ä¸€æ ·çš„ï¼Œå°±ä¸å¤šè¯´æ˜äº†</p>
<p>åœ¨ Border ä¸‹é¢ Create 2D Object -&gt; Sprite  </p>
<p>åš4ä¸ªè¾¹</p>
<p>ç»™4ä¸ªè¾¹åŠ ä¸Š RigidBody2D å’Œ BoxCollider2D æ¥åšç‰©ç†æ•ˆæœ</p>
<img src="/2018/12/10/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AProjectTiny%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E5%BC%B9%E7%90%83%E5%92%8C2D%E7%89%A9%E7%90%86/hierarchy.jpg" class="" title="å¦‚å›¾">

<p>åˆšä½“å’Œç¢°æ’æ£€æµ‹çš„é€‰é¡¹éƒ½æ¯”è¾ƒç®€å•</p>
<p>è¯´ä¸€ä¸‹åˆšä½“çš„å‡ ä¸ª BodyType</p>
<ul>
<li>Staticï¼šé™æ€ï¼Œä¸åšç‰©ç†æ¨¡æ‹Ÿï¼Œè´¨é‡æ— é™ï¼Œä¸ä¼šåŒå…¶ä»– static å’Œ kinematic åšç¢°æ’æ£€æµ‹</li>
<li>Kinematicï¼šè¿åŠ¨å­¦ï¼Œè´¨é‡æ— é™ï¼Œè¿åŠ¨é  velocityï¼Œè´¨é‡æ— é™ï¼Œæ‰€ä»¥ä¸å—åŠ›çš„ä½œç”¨ï¼Œä¸ä¼šåŒå…¶ä»– static å’Œ kinematic åšç¢°æ’æ£€æµ‹ï¼Œç§»åŠ¨é è®¾ç½®ä»–çš„ Position æˆ– velocity</li>
<li>Dynamicï¼šåŠ¨æ€ï¼Œå…¨ç‰©ç†æ¨¡æ‹Ÿï¼Œå’Œå…¶ä»–ä¸‰ç§ç±»å‹çš„åˆšä½“åšç¢°æ’æ£€æµ‹ï¼Œä¸€èˆ¬é ç»™å…¶æ–½åŠ ä¸€ä¸ªåŠ›æ¥è¿åŠ¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥è®¾ç½® velocity å’Œ Position ä½†æ˜¯æ„ä¹‰ä¸å¤§</li>
<li>BulletDynamicï¼šå­å¼¹åŠ¨æ€ï¼Œå’ŒåŠ¨æ€å·®ä¸å¤šï¼Œä½†æ˜¯ä½¿ç”¨çš„è¿ç»­ç¢°æ’æ£€æµ‹ï¼Œæ›´ç²¾ç¡®ï¼Œä¹Ÿæ›´æ¶ˆè€—èµ„æºï¼Œå¥½å¤„æ˜¯ä¸ä¼šå› ä¸ºé€Ÿåº¦è¿‡å¿«è€Œç©¿è¿‡å…¶ä»–åˆšä½“</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬çš„è¾¹ç•Œé€‰æ‹©ä»€ä¹ˆå¾ˆæ˜æ˜¾äº†-&gt; Static</p>
<p>å…¶ä»–å‡ ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>freezeRotationï¼šå¦‚æœ true åˆ™ä¸èƒ½æ—‹è½¬</li>
<li>frictionï¼šæ‘©æ“¦åŠ›ï¼Œ0 ä»£è¡¨æ— æ‘©æ“¦ï¼Œ1 ä»£è¡¨å¤§æ‘©æ“¦ï¼Œ1 ä»¥ä¸Šä»£è¡¨æ¯” 1 å¤§çš„æ‘©æ“¦ï¼ˆåºŸè¯ï¼‰</li>
<li>restitutionï¼šå¼¹æ€§ç³»æ•°ï¼Œ0 ä»£è¡¨å®Œå…¨å¸æ”¶ï¼Œ1 ä»£è¡¨å®Œå…¨åå¼¹</li>
<li>densityï¼šå¯†åº¦ï¼Œå†³å®šåˆšä½“çš„ è´¨é‡ = å¯†åº¦ * ä½“ç§¯</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©å…¨åå¼¹ restitution è®¾ç½®ä¸º 1</p>
<h3 id="è‡ªå®šä¹‰æˆ‘ä»¬çš„äº§ç”Ÿå™¨-spawner"><a href="#è‡ªå®šä¹‰æˆ‘ä»¬çš„äº§ç”Ÿå™¨-spawner" class="headerlink" title="è‡ªå®šä¹‰æˆ‘ä»¬çš„äº§ç”Ÿå™¨ spawner"></a>è‡ªå®šä¹‰æˆ‘ä»¬çš„äº§ç”Ÿå™¨ spawner</h3><p>æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªç»„ä»¶æ¥äº§ç”Ÿå°çƒ</p>
<p>åœ¨ èœå• -&gt; Tiny -&gt; Component </p>
<p>æ–°å»ºä¸€ä¸ª Spawner ç»„ä»¶</p>
<p>ç‚¹å‡»ç»„ä»¶ï¼Œåœ¨ inspector ä¸­å¯ä»¥å¯¹å…¶å­—æ®µæ¥åšä¿®æ”¹</p>
<p>å¦‚æœ hide_flags è®¾ç½®ä¸º hide in inspectors åˆ™åœ¨å±‚çº§å›¾ä¸­å³ä½¿æ·»åŠ åˆ°å®ä½“ä¸Šäº†ä¹Ÿä¸ä¼šæ˜¾ç¤ºå‡ºæ¥</p>
<p>add new field å¯ä»¥æ·»åŠ ä»»æ„å¯ç©çš„æ•°å€¼å’Œå±æ€§ç±»å‹</p>
<p>ç‚¹å‡»å±æ€§åç§°å¯ä»¥ä¿®æ”¹ä¹‹ï¼Œä¸‹é¢å¯ä»¥è®¾ç½®é»˜è®¤å€¼</p>
<p>æœ€åè®¾ç½®å¦‚ä¸‹</p>
<p>æˆ‘ä»¬åœ¨å»¶æ—¶ 1.5s åæ¯ 1.5s åˆ›å»ºä¸€ä¸ª spawnedGroup çš„å®ä½“ æœ€å¤š maxCount ä¸ª</p>
<p>ç±»å‹å³è¾¹çš„ 3 ä¸ªå›¾æ ‡åˆ†åˆ«æ˜¯</p>
<ul>
<li>æ˜¯å¦æ•°ç»„ç±»å‹</li>
<li>ç¼–è¾‘å™¨æ˜¯å¦å¯è§ï¼šæ¯”å¦‚æˆ‘ä»¬çš„ curCount è¿™ä¸ªå­—æ®µç¼–è¾‘å™¨ä¸å¯è§ï¼Œå› ä¸ºæ˜¯ä¸ç”¨ç¼–è¾‘ä¹Ÿä¸èƒ½ç¼–è¾‘</li>
<li>å­èœå• å­—é¢ä¸Šçš„æ„æ€ï¼ŒDocument é€‰é¡¹åº”è¯¥å’Œè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£çš„å†…å®¹æœ‰å…³</li>
</ul>
<img src="/2018/12/10/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AProjectTiny%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E5%BC%B9%E7%90%83%E5%92%8C2D%E7%89%A9%E7%90%86/component_inspector.jpg" class="" title="å¦‚å›¾">

<p>ç”Ÿæˆå™¨ç»„ä»¶æœ‰äº†ï¼Œæˆ‘ä»¬ç»§ç»­æ¥æç”Ÿæˆç³»ç»Ÿ</p>
<p>èœå•ï¼Œåˆ›å»º TypeScript System ï¼ˆåé¢çœç•¥å“ªé‡Œçš„èœå•äº†å“¦ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> game &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** New System */</span></span><br><span class="line">    <span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">NewSystem</span> <span class="keyword">extends</span> <span class="title">ut</span>.<span class="title">ComponentSystem</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        OnUpdate():<span class="built_in">void</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸€ä¸ªç»§æ‰¿ ut.ComponentSystem çš„ç±»ï¼Œé‡å†™ä¸€ä¸ª OnUpdate å‡½æ•°</p>
<p>æ˜¯ä¸æ˜¯å’Œ Unity ECS çš„æ–¹å¼ä¸€æ¯›ä¸€æ ·</p>
<p>ut æ˜¯ unity tiny çš„ç®€ç§°</p>
<p>æ–‡ä»¶åä¿®æ”¹ä¸º SpawnSystem</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> game &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">SpawnSystem</span> <span class="keyword">extends</span> <span class="title">ut</span>.<span class="title">ComponentSystem</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        OnUpdate(): <span class="built_in">void</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.world.forEach([game.Spawner], <span class="function">(<span class="params">spawner</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (spawner.isPaused)</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">let</span> time = spawner.time;</span><br><span class="line">                <span class="keyword">let</span> delay = spawner.delay;</span><br><span class="line"></span><br><span class="line">                time -= ut.Time.deltaTime();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (time &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    time += delay;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">&quot;spawn&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (spawner.curCount &lt; spawner.maxCount) &#123;</span><br><span class="line">                        ut.EntityGroup.instantiate(<span class="built_in">this</span>.world, spawner.spawnedGroup);</span><br><span class="line">                        spawner.curCount++</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                spawner.time = time;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç å¦‚ä¸Šï¼Œå¾ªç¯ World ä¸­çš„æ¯ä¸€ä¸ª Spawner æ¥æ“ä½œ</p>
<p>è‡³æ­¤ï¼Œç”Ÿæˆå™¨ç»„ä»¶å®Œæˆï¼Œæˆ‘ä»¬åœ¨ MainGroup çš„ Spawn å…ƒç´ çš„ insepector ä¸­ç‚¹å‡» Add Tiny Component å¢åŠ ä¸€ä¸ª Spawner ç»„ä»¶</p>
<p>äºæ˜¯å°±å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­è®¾ç½®è¿™ä¸ªè‡ªå®šç»„ä»¶çš„å€¼äº†</p>
<p>spawnedGroup è®¾ç½®ä¸º game.BallGroup</p>
<p>maxCount è®¾ç½®ä¸º 10</p>
<hr>
<h2 id="åˆ›å»ºçƒçƒå®ä½“"><a href="#åˆ›å»ºçƒçƒå®ä½“" class="headerlink" title="åˆ›å»ºçƒçƒå®ä½“"></a>åˆ›å»ºçƒçƒå®ä½“</h2><p>åˆ›å»ºæ–°çš„å®ä½“ç»„ åä¸º BallGroup</p>
<p>ç‚¹å‡» Load æŒ‰é’®</p>
<p>æ”¾åˆ°å±‚çº§å›¾ä¸­</p>
<p>åŠ å…¥ä¸€ä¸ª 2d sprite UnitBall å¦‚å›¾</p>
<p>æ–°å»ºä¸€ä¸ªæ–°çš„ç©ºç»„ä»¶ BallFlag ç”¨æ¥ä»£è¡¨å®ä½“æ˜¯çƒçƒ</p>
<p>å†å¢åŠ  CircleCollider2D RigidBody2D ç»„ä»¶åˆ°çƒçƒ</p>
<p>è°ƒæ•´å¥½åœ†å½¢æ£€æµ‹çš„åŠå¾„</p>


<p>åšå¥½ä¹‹å Unload BallGroupï¼Œåé¢æˆ‘ä»¬éƒ½é€šè¿‡ Spawner æ¥ç”Ÿæˆçƒçƒ</p>
<h3 id="çƒçƒçš„è¡Œä¸º"><a href="#çƒçƒçš„è¡Œä¸º" class="headerlink" title="çƒçƒçš„è¡Œä¸º"></a>çƒçƒçš„è¡Œä¸º</h3><p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè„šæœ¬æ¥æ§åˆ¶çƒçƒç”Ÿæˆçš„åœ°æ–¹ï¼Œå¹¶ä¸”ç»™ä¸€ä¸ªåŠ›è®©ä»–è·‘èµ·æ¥</p>
<p>èœå• åˆ›å»º TypeScript Behavior</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> game &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">NewBehaviourFilter</span> <span class="keyword">extends</span> <span class="title">ut</span>.<span class="title">EntityFilter</span> </span>&#123;</span><br><span class="line">        <span class="attr">node</span>: ut.Core2D.TransformNode;</span><br><span class="line">        position?: ut.Core2D.TransformLocalPosition;</span><br><span class="line">        rotation?: ut.Core2D.TransformLocalRotation;</span><br><span class="line">        scale?: ut.Core2D.TransformLocalScale;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">NewBehaviour</span> <span class="keyword">extends</span> <span class="title">ut</span>.<span class="title">ComponentBehaviour</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">data</span>: NewBehaviourFilter;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ComponentBehaviour lifecycle events</span></span><br><span class="line">        <span class="comment">// uncomment any method you need</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// this method is called for each entity matching the NewBehaviourFilter signature, once when enabled</span></span><br><span class="line">        <span class="comment">//OnEntityEnable():void &#123; &#125;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// this method is called for each entity matching the NewBehaviourFilter signature, every frame it&#x27;s enabled</span></span><br><span class="line">        <span class="comment">//OnEntityUpdate():void &#123; &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// this method is called for each entity matching the NewBehaviourFilter signature, once when disabled</span></span><br><span class="line">        <span class="comment">//OnEntityDisable():void &#123; &#125;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>NewBehaviourFilter ç›¸å½“äºæ˜¯ Unity ECS ä¸­çš„ GetEntityGroup ä¸­çš„ struct</p>
<p>å°†ä¼šè·å¾—æœ‰è¿™ä¸ªè¿‡æ»¤å™¨ä¸‹å­—æ®µçš„æ‰€æœ‰ Entity</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™ UnitBall å¢åŠ ä¸€ä¸ª ç©ºçš„ BallFlag æ¥ç¡®è®¤ä»–æ˜¯çƒçƒ</p>
<ul>
<li>OnEntityEnable. Called only once, the first frame this entity is matched by this behaviour. è·å¾—æ­¤Entityçš„ç¬¬ä¸€å¸§æ‰§è¡Œ</li>
<li>OnEntityUpdate. Called every frame on matching entities. </li>
<li>OnEntityDisable. Called only once, the first frame this entity is marked as disabled by this behaviour. è®¾ç½®ä¸º disable çš„ç¬¬ä¸€å¸§æ‰§è¡Œ</li>
</ul>
<p>çƒçƒè¡Œä¸ºä»£ç å¦‚ä¸‹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> game &#123;</span><br><span class="line">    <span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">BallBehaviorFilter</span> <span class="keyword">extends</span> <span class="title">ut</span>.<span class="title">EntityFilter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">position</span>: ut.Core2D.TransformLocalPosition;</span><br><span class="line">        entity: ut.Entity;</span><br><span class="line">        ball: game.BallFlag;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">BallBehavior</span> <span class="keyword">extends</span> <span class="title">ut</span>.<span class="title">ComponentBehaviour</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">data</span>: BallBehaviorFilter;</span><br><span class="line"></span><br><span class="line">        OnEntityEnable(): <span class="built_in">void</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;ball Enabled&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// éšæœºçƒçƒå‡ºç°çš„ä½ç½®</span></span><br><span class="line">            <span class="keyword">let</span> randomX = getRandom(-<span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">            <span class="keyword">let</span> randomY = getRandom(-<span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">            <span class="built_in">this</span>.data.position.position = <span class="keyword">new</span> Vector3(randomX, randomY, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// éšæœºç»™çƒçƒä¸€ä¸ªåŠ›ï¼ŒåŠ¨èµ·æ¥</span></span><br><span class="line">            <span class="comment">// æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œç”¨äº† this.world.addComponentData ç»™çƒçƒæ·»åŠ äº†ä¸€ä¸ªåŠ åŠ›ç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç»„ä»¶</span></span><br><span class="line">            <span class="comment">// è¿™é‡Œçš„ AddImpulse2D ç»„ä»¶ä¼šåœ¨è¿™ä¸€å¸§ä¹‹åè‡ªåŠ¨æ¶ˆå¤±æ‰</span></span><br><span class="line">            <span class="keyword">let</span> impulse = <span class="keyword">new</span> ut.Physics2D.AddImpulse2D;</span><br><span class="line">            <span class="keyword">let</span> newImpulse = <span class="keyword">new</span> Vector2(getRandom(-<span class="number">1</span>, <span class="number">1</span>), getRandom(-<span class="number">1</span>, <span class="number">1</span>)).normalize();</span><br><span class="line">            impulse.impulse = <span class="keyword">new</span> Vector2(newImpulse.x * <span class="number">100</span>, newImpulse.y * <span class="number">100</span>);</span><br><span class="line">            <span class="built_in">this</span>.world.addComponentData(<span class="built_in">this</span>.data.entity, impulse);</span><br><span class="line"></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;ball created:&quot;</span> + <span class="built_in">this</span>.data.position.position);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        OnEntityUpdate(): <span class="built_in">void</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getRandom</span>(<span class="params">min, max</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>) + min;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><p>åˆ°æ­¤æˆ‘ä»¬çš„å·¥ä½œå‘Šä¸€æ®µè½ï¼Œunity æ‰§è¡Œå</p>
<p>ä¼šåœ¨æˆ‘ä»¬çš„é»˜è®¤æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªçª—å£</p>
<img src="/2018/12/10/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AProjectTiny%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E5%BC%B9%E7%90%83%E5%92%8C2D%E7%89%A9%E7%90%86/run_game.jpg" class="" title="è¿è¡Œæ—¶ Unity çš„ Game çª—å£">

<p>åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨å¼€å‘è€…æ¨¡å¼å¯ä»¥çœ‹åˆ°æ‰“å°</p>
<p>ä¹Ÿå¯ä»¥æ‰«æäºŒç»´ç åœ¨ç§»åŠ¨è®¾å¤‡ä¸ŠæŸ¥çœ‹æ•ˆæœ</p>
<p>è¿è¡Œæ•ˆæœå¦‚å›¾</p>
<img src="/2018/12/10/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AProjectTiny%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E5%BC%B9%E7%90%83%E5%92%8C2D%E7%89%A9%E7%90%86/tiny_run.gif" class="" title="è¿è¡Œ">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mapz.github.io/2018/12/10/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AProjectTiny%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E5%88%9D%E8%AF%86Tiny%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/link-300x300.gif">
      <meta itemprop="name" content="Mapz">
      <meta itemprop="description" content="FIND THE CHILD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mapz's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/10/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AProjectTiny%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E5%88%9D%E8%AF%86Tiny%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">Unityå­¦ä¹ ï¼šProjectTinyå­¦ä¹ ï¼ˆä¸€ï¼‰åˆè¯†Tinyæ¨¡å¼</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-12-10 11:10:56" itemprop="dateCreated datePublished" datetime="2018-12-10T11:10:56+08:00">2018-12-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-04-22 10:15:32" itemprop="dateModified" datetime="2021-04-22T10:15:32+08:00">2021-04-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Project-Tiny-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Project-Tiny-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Project Tiny æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Project Tiny æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>2018å¹´12æœˆï¼ŒUnityåœ¨2018.3betaç‰ˆæœ¬ä¸Šå¼€æ”¾äº†ä¸€ä¸ªæ–°åŒ…çš„é¢„è§ˆä¸‹è½½ï¼Œå«åšProjectTiny</p>
<p>å¹¶å‘å¸ƒäº†ä¸€ä¸ªåŸºäºæ­¤æ¥åˆ¶ä½œçš„ç½‘é¡µæ¸¸æˆ</p>
<p><a target="_blank" rel="noopener" href="https://blogs.unity3d.com/cn/2018/12/05/project-tiny-preview-package-is-here/">åŸæ–‡Blogä¼ é€é—¨</a></p>
<p><a target="_blank" rel="noopener" href="https://tiny-match3.storage.googleapis.com/index.html">Tiny Arms Revenge æ¸¸æˆä½“éªŒåœ°å€ï¼ˆéœ€ç§‘å­¦ä¸Šç½‘ï¼‰</a></p>
<p>Project Tiny çš„ç›®çš„ï¼Œæ˜¯ä¸ºæ›´å¤šå³å¼€å³ç©çš„æ¸¸æˆå’Œäº’åŠ¨å¹¿å‘Šæä¾›æ”¯æŒ</p>
<p>ç°åœ¨å¯ä»¥åˆ¶ä½œ2Dç±»å‹çš„Webæ¸¸æˆ</p>
<p>ä½“éªŒæ¸¸æˆå¤§å°ä»…ä»…åªæœ‰ 1.8 MBï¼Œå¯åŠ¨åªéœ€ä¸‹è½½ 969 KB</p>
<hr>
<h2 id="Project-Tiny-ç°åœ¨æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œä»¥åä¼šæ€ä¹ˆæ ·ï¼Ÿ"><a href="#Project-Tiny-ç°åœ¨æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œä»¥åä¼šæ€ä¹ˆæ ·ï¼Ÿ" class="headerlink" title="Project Tiny ç°åœ¨æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œä»¥åä¼šæ€ä¹ˆæ ·ï¼Ÿ"></a>Project Tiny ç°åœ¨æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œä»¥åä¼šæ€ä¹ˆæ ·ï¼Ÿ</h2><p>ç°åœ¨æ­£åœ¨é¢„è§ˆç‰ˆæœ¬ï¼Œåªæ”¯æŒ2Dæ¸¸æˆï¼Œåªæ”¯æŒTSè¯­è¨€ï¼Œå°†æ¥ä¼šæ”¯æŒC#ï¼Œå¹¶ç§»é™¤TSæ”¯æŒï¼Œå¹¶ä¸”ä¸æ–­å®Œå–„å·¥å…·é“¾å’Œç‰¹æ€§ï¼Œå¹¶æ”¯æŒ3Då’ŒARä½“éªŒ</p>
<hr>
<h2 id="Project-Tiny-çš„ç‰¹è‰²å’Œäº®ç‚¹ï¼Ÿ"><a href="#Project-Tiny-çš„ç‰¹è‰²å’Œäº®ç‚¹ï¼Ÿ" class="headerlink" title="Project Tiny çš„ç‰¹è‰²å’Œäº®ç‚¹ï¼Ÿ"></a>Project Tiny çš„ç‰¹è‰²å’Œäº®ç‚¹ï¼Ÿ</h2><ul>
<li>çº¯çš„ECSæ¨¡å¼ï¼Œæˆ–è®¸å…¶ç¼–è¾‘å™¨å¯ä»¥çœ‹åšæœªæ¥Unityçš„ECSæ­£å¼ç‰ˆç¼–è¾‘å™¨çš„ä¸€ä¸ªé¢„è§ˆ</li>
<li>ECSæ¨¡å¼å¸¦æ¥çš„æ•ˆç‡æé«˜</li>
<li>å¿«é€Ÿåˆ¶ä½œæ¸¸æˆå’Œäº’åŠ¨å¹¿å‘Š</li>
</ul>
<hr>
<h2 id="æˆ‘çš„æ„Ÿè§‰"><a href="#æˆ‘çš„æ„Ÿè§‰" class="headerlink" title="æˆ‘çš„æ„Ÿè§‰"></a>æˆ‘çš„æ„Ÿè§‰</h2><p>Project Tiny é¡¾åæ€ä¹‰å°±æ˜¯ä¸€ä¸ªç²¾å¹²ç‰ˆæœ¬çš„ Unity å•¦ï¼Œç”¨æ¥åˆ¶ä½œ web å†…å®¹ï¼Œå¹¶ä¸”å…¶ ECS æ¨¡å¼å¾ˆå¯èƒ½å°±æ˜¯ä»¥åçš„ Unity ECS æ¨¡å¼çš„é¢„è§ˆï¼Œå­¦ä¹  Project Tiny å¯¹äºæˆ‘ä»¬è¿›ä¸€æ­¥ç†Ÿæ‚‰ Unity ECS å’Œæå‰ç†Ÿæ‚‰æ–°çš„ç¼–è¾‘å™¨éƒ½æœ‰å¥½å¤„</p>
<hr>
<h2 id="å¦‚ä½•å¼€å§‹åˆ¶ä½œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Ÿ"><a href="#å¦‚ä½•å¼€å§‹åˆ¶ä½œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Ÿ" class="headerlink" title="å¦‚ä½•å¼€å§‹åˆ¶ä½œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Ÿ"></a>å¦‚ä½•å¼€å§‹åˆ¶ä½œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Ÿ</h2><ol>
<li>ä¸‹è½½ Unity 2018.3 Beta</li>
<li>æ‰“å¼€ Windows -&gt; package manager</li>
<li>ç‚¹å‡» Advancedï¼Œå‹¾é€‰ show preview packages </li>
<li>ä¸‹è½½ Tiny Mode åŒ…</li>
<li>èœå•æ–°å¢é¡¹ç›® Tinyï¼Œè¡¨ç¤ºä¸€åˆ‡ OK</li>
<li>Tiny -&gt; File -&gt; NewProject æ–°å»ºé¡¹ç›®</li>
</ol>
<h2 id="ä¾‹å­é¡¹ç›®åœ¨å“ªé‡Œï¼Ÿ"><a href="#ä¾‹å­é¡¹ç›®åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="ä¾‹å­é¡¹ç›®åœ¨å“ªé‡Œï¼Ÿ"></a>ä¾‹å­é¡¹ç›®åœ¨å“ªé‡Œï¼Ÿ</h2><p>èœå• Tiny -&gt; Import Samples ä¼šåŠ è½½ä¾‹å­åˆ°é¡¹ç›®ä¸­</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mapz.github.io/2018/12/03/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AECS%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89Hybrid%E6%A8%A1%E5%BC%8FECS%E6%8E%A7%E5%88%B6%E5%88%BA%E8%9B%87%E7%A7%BB%E5%8A%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/link-300x300.gif">
      <meta itemprop="name" content="Mapz">
      <meta itemprop="description" content="FIND THE CHILD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mapz's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/03/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AECS%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89Hybrid%E6%A8%A1%E5%BC%8FECS%E6%8E%A7%E5%88%B6%E5%88%BA%E8%9B%87%E7%A7%BB%E5%8A%A8/" class="post-title-link" itemprop="url">Unityå­¦ä¹ ï¼šECSå­¦ä¹ ï¼ˆä¸€ï¼‰Hybridæ¨¡å¼ECSæ§åˆ¶åˆºè›‡ç§»åŠ¨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-12-03 15:53:23" itemprop="dateCreated datePublished" datetime="2018-12-03T15:53:23+08:00">2018-12-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-04-22 10:15:32" itemprop="dateModified" datetime="2021-04-22T10:15:32+08:00">2021-04-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Unity 2018 çš„æ–°åŠŸèƒ½ ECS ç°åœ¨å·²ç»æ”¾å‡ºäº†é¢„è§ˆç‰ˆæœ¬ï¼Œæˆ‘ä»¬ç°åœ¨å°±æ¥å°è¯•ä¸€ä¸‹</p>
<p>â€”</p>
<h2 id="Hybridæ¨¡å¼"><a href="#Hybridæ¨¡å¼" class="headerlink" title="Hybridæ¨¡å¼"></a>Hybridæ¨¡å¼</h2><p>hybrid å°±æ˜¯æ··åˆæ¨¡å¼ï¼Œå› ä¸º Unity ECS ç°åœ¨è¿˜åªæœ‰é¢„è§ˆç‰ˆæœ¬</p>
<p>å¯¹ GameObject å’Œå„ç§ Render æ”¯æŒå¾ˆå·®</p>
<p>æ‰€ä»¥æ··åˆæ¨¡å¼å¯ä»¥çœ‹æˆç°åœ¨çš„ GameObject æ¨¡å¼åˆ°çº¯ ECS ä¹‹é—´çš„è¿‡æ¸¡æ¨¡å¼</p>
<p>Hybrid æ¨¡å¼ä¸‹ï¼Œå¹¶æ²¡æœ‰åœ¨æ•ˆç‡ä¸Šæœ‰éå¸¸å¤§çš„æå‡</p>
<p>æ¯”èµ·çº¯ ECS æ¨¡å¼</p>
<ul>
<li>åˆå§‹åŒ–æ—¶é—´ï¼ˆéå†å¯»æ‰¾Entityçš„è¿‡ç¨‹ï¼‰æ— æ³•ä¼˜åŒ–</li>
<li>è½½å…¥æ—¶é—´æ— æ³•ä¼˜åŒ–</li>
<li>æ•°æ®åœ¨å†…å­˜ä¸­æ˜¯éšæœºè·å–çš„ï¼Œéçº¿æ€§ï¼Œæ‰§è¡Œæ•ˆç‡ä¸‹é™</li>
<li>æ— æ³•åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨</li>
<li>æ²¡æœ‰SIMD</li>
</ul>
<p>ä½†æ˜¯æˆ‘ä»¬ä»»ç„¶å¯ä»¥å…ˆå°è¯•é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¥æé«˜ç¼–ç¨‹æ•ˆç‡</p>
<p>å¹¶æå‰ç†Ÿæ‚‰ Unity ECS çš„æ€ç»´æ¨¡å¼</p>
<hr>
<h2 id="èµ„æºå‡†å¤‡"><a href="#èµ„æºå‡†å¤‡" class="headerlink" title="èµ„æºå‡†å¤‡"></a>èµ„æºå‡†å¤‡</h2><p>é¦–å…ˆ å¯¼å…¥äº†ä¸€ç»„ æ˜Ÿé™…äº‰éœ¸ä¸­åˆºè›‡çš„ Sprite </p>
<p>å…ˆåœ¨ Sprite Editor ä¸­åˆ‡å¥½äº†åˆºè›‡çš„ èµ°è·¯ Sprite</p>
<p>åšå¥½äº†åˆºè›‡16ä¸ªæ–¹å‘èµ°è·¯çš„åŠ¨ä½œ Animation å’Œ Animator</p>
<p>Animator å¢åŠ å‚æ•° Direction Float æ§åˆ¶åˆºè›‡çš„ç§»åŠ¨æ–¹å‘</p>
<p>æ€»å…± 16 æ–¹å‘ åšå¥½ä» AnyState åˆ°æ¯ä¸ªæ–¹å‘çš„ Direction æ¡ä»¶</p>
<img src="/2018/12/03/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AECS%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89Hybrid%E6%A8%A1%E5%BC%8FECS%E6%8E%A7%E5%88%B6%E5%88%BA%E8%9B%87%E7%A7%BB%E5%8A%A8/unity_01.png" class="" title="åšå¥½åˆºè›‡çš„ç›¸å…³åŠ¨ä½œ">

<p>æˆ‘ä»¬ä¸éœ€è¦è½¬æ¢åŠ¨ç”»ï¼Œæ‰€ä»¥ æ¯ä¸ª translation çš„ setting é‡Œé¢çš„ duration éƒ½æ”¹æˆ 0</p>
<p>å¹¶ä¸”è¦æŠŠ Can translate to self å–æ¶ˆå‹¾é€‰ï¼Œä¸ç„¶ æ°¸è¿œä¼šå¡ç¬¬ä¸€å¸§</p>
<hr>
<p>æˆ‘ä»¬å…ˆé€šè¿‡ç®€å•çš„é”®ç›˜æ“ä½œæ¥æ§åˆ¶åˆºè›‡ç§»åŠ¨</p>
<h2 id="è®¾è®¡æˆ‘ä»¬çš„ç³»ç»Ÿå’Œå®ä½“"><a href="#è®¾è®¡æˆ‘ä»¬çš„ç³»ç»Ÿå’Œå®ä½“" class="headerlink" title="è®¾è®¡æˆ‘ä»¬çš„ç³»ç»Ÿå’Œå®ä½“"></a>è®¾è®¡æˆ‘ä»¬çš„ç³»ç»Ÿå’Œå®ä½“</h2><h3 id="å®ä½“"><a href="#å®ä½“" class="headerlink" title="å®ä½“"></a>å®ä½“</h3><p>å•ä½å®ä½“ Unit åŒ…å«çš„ç»„ä»¶</p>
<ul>
<li>ä½ç½® Position</li>
<li>é€Ÿåº¦ Velocity </li>
<li>å•ä½ Unit </li>
<li>è¾“å…¥ PlayerInput</li>
<li>å¯è½¬å‘ Directable</li>
</ul>
<h3 id="ç³»ç»Ÿ"><a href="#ç³»ç»Ÿ" class="headerlink" title="ç³»ç»Ÿ"></a>ç³»ç»Ÿ</h3><h4 id="é€»è¾‘ç³»ç»Ÿ"><a href="#é€»è¾‘ç³»ç»Ÿ" class="headerlink" title="é€»è¾‘ç³»ç»Ÿ"></a>é€»è¾‘ç³»ç»Ÿ</h4><p>è¿åŠ¨ç³»ç»Ÿ-éœ€è¦</p>
<ul>
<li>ä½ç½® Position</li>
<li>é€Ÿåº¦ Velocity</li>
</ul>
<p>è¾“å…¥ç³»ç»Ÿ-éœ€è¦ çš„ç»„ä»¶</p>
<ul>
<li>è¾“å…¥ PlayerInput </li>
<li>é€Ÿåº¦ Velocity</li>
</ul>
<h4 id="åŒæ­¥-GameObject-çŠ¶æ€çš„ç³»ç»Ÿ"><a href="#åŒæ­¥-GameObject-çŠ¶æ€çš„ç³»ç»Ÿ" class="headerlink" title="åŒæ­¥ GameObject çŠ¶æ€çš„ç³»ç»Ÿ"></a>åŒæ­¥ GameObject çŠ¶æ€çš„ç³»ç»Ÿ</h4><p>åŒæ­¥ transform ç³»ç»Ÿ</p>
<ul>
<li>ä½ç½® Position</li>
<li>Transform</li>
</ul>
<p>åŒæ­¥åˆºè›‡ Animator æ–¹å‘çŠ¶æ€çš„ç³»ç»Ÿ</p>
<ul>
<li>é€Ÿåº¦ Velocity ï¼ˆé€Ÿåº¦æ§åˆ¶æœå‘ï¼‰</li>
<li>Animator</li>
</ul>
<hr>
<h2 id="ç¼–å†™ä¸Šè¿°ç»„ä»¶å’Œç³»ç»Ÿçš„ä»£ç "><a href="#ç¼–å†™ä¸Šè¿°ç»„ä»¶å’Œç³»ç»Ÿçš„ä»£ç " class="headerlink" title="ç¼–å†™ä¸Šè¿°ç»„ä»¶å’Œç³»ç»Ÿçš„ä»£ç "></a>ç¼–å†™ä¸Šè¿°ç»„ä»¶å’Œç³»ç»Ÿçš„ä»£ç </h2><h3 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><h4 id="ä½ç½®"><a href="#ä½ç½®" class="headerlink" title="ä½ç½®"></a>ä½ç½®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">using Unity.Mathematics;</span><br><span class="line">using UnityEngine;</span><br><span class="line">public class Position2D : MonoBehaviour &#123;</span><br><span class="line">    // ä½ç½® x y</span><br><span class="line">    public float2 Value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è¾“å…¥"><a href="#è¾“å…¥" class="headerlink" title="è¾“å…¥"></a>è¾“å…¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">using Unity.Mathematics;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerInput : MonoBehaviour &#123;</span><br><span class="line">    // è¾“å…¥ x y</span><br><span class="line">    public float2 Move;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¯è½¬å‘"><a href="#å¯è½¬å‘" class="headerlink" title="å¯è½¬å‘"></a>å¯è½¬å‘</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">using Unity.Mathematics;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class Directable : MonoBehaviour &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å•ä½"><a href="#å•ä½" class="headerlink" title="å•ä½"></a>å•ä½</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">using Unity.Mathematics;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class Unit : MonoBehaviour &#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="é€Ÿåº¦"><a href="#é€Ÿåº¦" class="headerlink" title="é€Ÿåº¦"></a>é€Ÿåº¦</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">using Unity.Mathematics;</span><br><span class="line">using UnityEngine;</span><br><span class="line">public class Velocity : MonoBehaviour &#123;</span><br><span class="line">    // é€Ÿåº¦ x y</span><br><span class="line">    public float2 Value;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¤§å®¶å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿™è¾¹éƒ½æ˜¯ç»§æ‰¿çš„ MonoBehavior ï¼Œæœ‰çš„è¿˜æ˜¯ä¸€äº›ç©ºçš„ç±»</p>
<p>ç»§æ‰¿ MonoBehavior æ‰èƒ½è¢«æ·»åŠ åˆ° GameObject ä¸­,è‡³äºç©ºç±»çš„ä½œç”¨æˆ‘ä»¬ä¸‹é¢åœ¨è®²ç³»ç»Ÿçš„æ—¶å€™æ¥è®²</p>
<h3 id="ç³»ç»Ÿ-1"><a href="#ç³»ç»Ÿ-1" class="headerlink" title="ç³»ç»Ÿ"></a>ç³»ç»Ÿ</h3><p>ECS ä¸­çš„ S æ„ä¸º System å°±æ˜¯ç³»ç»Ÿäº†ï¼Œç³»ç»Ÿçš„åšæ³•ï¼Œä¸‹é¢å·²ç»æ¯”è¾ƒæ¸…æ¥šäº†</p>
<p>åœ¨ç³»ç»Ÿä¸­ å¯ä»¥é€šè¿‡ GetEntities æ¥è‡ªåŠ¨è·å¾—å£°æ˜å¥½çš„ ç»“æ„ä½“æ•°æ®</p>
<p>ç»“æ„ä½“æ•°æ®æ˜¯ä»å“ªé‡Œè·å¾—çš„å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ä»æ¸¸æˆä¸­æ‰€æœ‰çš„ Entity æ¥è‡ªåŠ¨è·å–ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¸€ä¸ª GameObject ï¼Œè¦è·å¾—è¿™ä¸ª GameObject çš„æ•°æ®ï¼Œéœ€è¦åœ¨è¿™ä¸ª GameObject ä¸­æ·»åŠ ä¸€ä¸ªå†…ç½®è„šæœ¬ GameObjectEntity</p>
<p>è¡¨ç¤ºæˆ‘ä»¬è¿™ä¸ª GameObject æ˜¯ä¸€ä¸ª Entity äº†</p>
<p>é‚£ä¹ˆå¤§å®¶å¯èƒ½ä¹Ÿå°±çŸ¥é“ä¸Šé¢é‚£äº›ç©ºç±»çš„ä½œç”¨äº†</p>
<p>å‡å¦‚æˆ‘ä»¬ä¸å¯¹ GameObject æ·»åŠ  Directable è„šæœ¬çš„è¯</p>
<p>å°±æ— æ³•è¢« SyncAnimatorDirectionSystemï¼ˆè§ä¸‹æ–¹ä»£ç ï¼‰ ä¸­çš„ GetEntities<Data> æ¥è·å¾—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GetEntities &lt;T&gt;</span><br></pre></td></tr></table></figure>
<p> çš„ä½œç”¨å°±æ˜¯è·å–å«æœ‰ T ä¸­æ‰€æœ‰å­—æ®µç±»å‹çš„ æ‰€æœ‰ Entity</p>
<p>System å¯ä»¥ä½¿ç”¨ UpdateAfter æˆ–è€… UpdateBefore æ¥æ§åˆ¶å…¶æ‰§è¡Œé¡ºåº</p>
<h4 id="è¾“å…¥-1"><a href="#è¾“å…¥-1" class="headerlink" title="è¾“å…¥"></a>è¾“å…¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">using Unity.Entities;</span><br><span class="line">using Unity.Mathematics;</span><br><span class="line">using UnityEngine;</span><br><span class="line">public class PlayerInputSystem : ComponentSystem &#123;</span><br><span class="line">    struct PlayerData &#123;</span><br><span class="line"></span><br><span class="line">        public PlayerInput Input;</span><br><span class="line">        public Velocity Velocity;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected override void OnUpdate () &#123;</span><br><span class="line">        float dt = Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        foreach (var entity in GetEntities&lt;PlayerData&gt; ()) &#123;</span><br><span class="line">            var pi = entity.Input;</span><br><span class="line"></span><br><span class="line">            pi.Move.x = Input.GetAxis (&quot;Horizontal&quot;);</span><br><span class="line">            pi.Move.y = Input.GetAxis (&quot;Vertical&quot;);</span><br><span class="line"></span><br><span class="line">            entity.Velocity.Value = new float2 (pi.Move.x, pi.Move.y);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç§»åŠ¨"><a href="#ç§»åŠ¨" class="headerlink" title="ç§»åŠ¨"></a>ç§»åŠ¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">using Unity.Entities;</span><br><span class="line">using Unity.Mathematics;</span><br><span class="line">using UnityEngine;</span><br><span class="line">public class UnitMoveSystem : ComponentSystem &#123;</span><br><span class="line">    struct MoveUnit &#123;</span><br><span class="line"></span><br><span class="line">        public Position2D Position;</span><br><span class="line"></span><br><span class="line">        public Velocity MoveSpeed;</span><br><span class="line"></span><br><span class="line">        public Unit unit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected override void OnUpdate () &#123;</span><br><span class="line">        var dt = Time.deltaTime;</span><br><span class="line">        foreach (var entity in GetEntities&lt;MoveUnit&gt; ()) &#123;</span><br><span class="line">            var pos = entity.Position;</span><br><span class="line">            pos.Value += entity.MoveSpeed.Value * dt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åŒæ­¥ä½ç½®"><a href="#åŒæ­¥ä½ç½®" class="headerlink" title="åŒæ­¥ä½ç½®"></a>åŒæ­¥ä½ç½®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">using Unity.Collections;</span><br><span class="line">using Unity.Entities;</span><br><span class="line">using Unity.Mathematics;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">[UpdateAfter (typeof (UnitMoveSystem))]</span><br><span class="line">public class SyncTransformSystem : ComponentSystem &#123;</span><br><span class="line">    public struct Data &#123;</span><br><span class="line"></span><br><span class="line">        [ReadOnly] public Position2D Position;</span><br><span class="line"></span><br><span class="line">        public Transform Output;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected override void OnUpdate () &#123;</span><br><span class="line">        foreach (var entity in GetEntities&lt;Data&gt; ()) &#123;</span><br><span class="line">            float2 p = entity.Position.Value;</span><br><span class="line">            entity.Output.position = new float3 (p.x, p.y, 0);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">````</span><br><span class="line"></span><br><span class="line">#### åŒæ­¥åŠ¨ç”»æœå‘çŠ¶æ€</span><br><span class="line">```` C#</span><br><span class="line">using Unity.Collections;</span><br><span class="line">using Unity.Entities;</span><br><span class="line">using Unity.Mathematics;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">[UpdateAfter (typeof (PlayerInputSystem))]</span><br><span class="line">public class SyncAnimatorDirectionSystem : ComponentSystem &#123;</span><br><span class="line"></span><br><span class="line">    public struct Data &#123;</span><br><span class="line"></span><br><span class="line">        [ReadOnly] public Velocity moveSpeed;</span><br><span class="line"></span><br><span class="line">        public Animator Output;</span><br><span class="line"></span><br><span class="line">        public Directable directable;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected override void OnUpdate () &#123;</span><br><span class="line">        foreach (var entity in GetEntities&lt;Data&gt; ()) &#123;</span><br><span class="line"></span><br><span class="line">            float2 p = entity.moveSpeed.Value;</span><br><span class="line"></span><br><span class="line">            var angle = Mathf.Atan2 (p.x, p.y) * Mathf.Rad2Deg;</span><br><span class="line">            if (angle &lt; 0) &#123;</span><br><span class="line">                angle = 360 + angle;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            entity.Output.SetFloat (&quot;Direction&quot;, angle);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">````</span><br><span class="line"></span><br><span class="line">ç„¶ååœ¨ åˆºè›‡çš„ Prefab ä¸‹æ·»åŠ éœ€è¦çš„ç»„ä»¶è„šæœ¬</span><br><span class="line"></span><br><span class="line">å¦‚ä¸‹å›¾</span><br><span class="line"></span><br><span class="line">&#123;% asset_img unity_02.png åˆºè›‡é¢„åˆ¶ä½“çš„è„šæœ¬æ·»åŠ  %&#125;</span><br><span class="line"></span><br><span class="line">åŠ è½½åˆºè›‡é¢„åˆ¶ä½“,è¿™é‡Œä½¿ç”¨ Lua åŠ è½½çš„</span><br><span class="line"></span><br><span class="line">``` Lua</span><br><span class="line">     local go = UnityEngine.GameObject.Instantiate(prefab)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>æŒ‰ wasd æ¥æ“ä½œåˆºè›‡ç§»åŠ¨</p>
<img src="/2018/12/03/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9AECS%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89Hybrid%E6%A8%A1%E5%BC%8FECS%E6%8E%A7%E5%88%B6%E5%88%BA%E8%9B%87%E7%A7%BB%E5%8A%A8/unity_03.gif" class="" title="åˆºè›‡å¯ä»¥ç§»åŠ¨äº†">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mapz.github.io/2018/12/03/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9A%E5%88%87%E5%89%B2Sprite/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/link-300x300.gif">
      <meta itemprop="name" content="Mapz">
      <meta itemprop="description" content="FIND THE CHILD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mapz's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/03/Unity%E5%AD%A6%E4%B9%A0%EF%BC%9A%E5%88%87%E5%89%B2Sprite/" class="post-title-link" itemprop="url">Unityå­¦ä¹ ï¼šåˆ‡å‰²Sprite</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2018-12-03 11:22:55" itemprop="dateCreated datePublished" datetime="2018-12-03T11:22:55+08:00">2018-12-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-04-22 10:15:32" itemprop="dateModified" datetime="2021-04-22T10:15:32+08:00">2021-04-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å¾ˆå¤š2Dè€èµ„æºæ˜¯æ‰“å¥½æˆä¸€å¼ å›¾çš„ï¼Œæˆ‘ä»¬éœ€è¦å»åˆ‡æˆä¸€ä¸ªä¸€ä¸ªçš„sprite</p>
<p>è¿™æ—¶å€™å¯¼å…¥å›¾ç‰‡åï¼Œæè´¨ç±»å‹é€‰æ‹© Sprite and UI ï¼Œ Sprite ç±»å‹é€‰æ‹© Mutiple</p>
<p>ç„¶åæ‰“å¼€ Sprite Editorï¼Œè‡ªå·±åˆ‡å°±å¯ä»¥äº†</p>
<p>Sprite Editor é‡Œé¢é€‰æ‹© Slice åˆ‡ç‰‡</p>
<p>å¦‚æœå›¾ç‰‡ä¸­æœ‰æ¡†ï¼Œé€‰æ‹© è‡ªåŠ¨åˆ‡åº”è¯¥å°± OK</p>
<p>å¦åˆ™è¿˜æœ‰æŒ‰ å¤§å°åˆ‡ å’Œ æŒ‰ä¸ªæ•°æ¥åˆ‡</p>
<p>åˆ‡å®Œä¹‹å ç‚¹å‡»æ¯ä¸ªç‰‡ç‰‡ï¼Œå¯ä»¥æ‰‹åŠ¨å†ä¿®æ”¹ä¸€ä¸‹</p>
<hr>
<h2 id="ä½¿ç”¨è„šæœ¬æ¥å¤„ç†æ¯ä¸ªåˆ‡ç‰‡"><a href="#ä½¿ç”¨è„šæœ¬æ¥å¤„ç†æ¯ä¸ªåˆ‡ç‰‡" class="headerlink" title="ä½¿ç”¨è„šæœ¬æ¥å¤„ç†æ¯ä¸ªåˆ‡ç‰‡"></a>ä½¿ç”¨è„šæœ¬æ¥å¤„ç†æ¯ä¸ªåˆ‡ç‰‡</h2><p>æˆ‘ä»¬å¯¼å…¥çš„ç´ ææ¯ä¸ªspriteæœ‰ä¸ªå°é»‘æ¡†ï¼Œè¿™ä¸ªå°é»‘æ¡†æˆ‘ä»¬ä¸è¦ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>æ¯ä¸ªæ‰‹åŠ¨å»é‡æ–°æ ¡æ­£å¤ªéº»çƒ¦ï¼Œè‡ªå·±å†™ä¸ªEditorè„šæœ¬æ¥è§£å†³å§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEditor;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class SpriteCustomScrips : MonoBehaviour &#123;</span><br><span class="line"></span><br><span class="line">	[MenuItem (&quot;Sprites/Rect small by 1&quot;)]</span><br><span class="line">	static void SpritesSmallBy1 () &#123;</span><br><span class="line">		// Debug.Log (Selection.</span><br><span class="line"></span><br><span class="line">		string path = AssetDatabase.GetAssetPath (Selection.activeObject);</span><br><span class="line">		Debug.Log (path);</span><br><span class="line"></span><br><span class="line">		TextureImporter ti = AssetImporter.GetAtPath (path) as TextureImporter;</span><br><span class="line">		SpriteMetaData[] spriteSheet = ti.spritesheet;</span><br><span class="line">		for (int i = 0; i &lt; spriteSheet.Length; i++) &#123;</span><br><span class="line"></span><br><span class="line">			if (spriteSheet[i].name.StartsWith (&quot;Hydra_walk_&quot;)) &#123;</span><br><span class="line">				spriteSheet[i].rect = new Rect (spriteSheet[i].rect.x + 1, spriteSheet[i].rect.y + 1, spriteSheet[i].rect.width - 2, spriteSheet[i].rect.height - 2);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		ti.spritesheet = spriteSheet;</span><br><span class="line">		EditorUtility.SetDirty (ti);</span><br><span class="line">		ti.SaveAndReimport ();</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„è„šæœ¬å¤§å®¶å¯ä»¥å‚è€ƒä¸€ä¸‹ï¼Œä¿®æ”¹äº†ä¸€ä¸‹spriteçš„rect</p>
<p>ç„¶åæˆ‘ä»¬åœ¨projectè§†å›¾ä¸­é€‰ä¸­åˆšæ‰è‡ªåŠ¨åˆ‡å¥½çš„èµ„æºï¼Œç‚¹å‡»èœå•å¤„ç†ä¸€ä¸‹ï¼Œå‘ç°1pxçš„å°é»‘æ¡†æ²¡æœ‰äº†</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Mapz"
      src="/images/link-300x300.gif">
  <p class="site-author-name" itemprop="name">Mapz</p>
  <div class="site-description" itemprop="description">FIND THE CHILD</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">46</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">43</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Mapz" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Mapz" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">true</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  

</body>
</html>
